<body>  
 <script>
 
 

  
  const url = 'https://api.make.com/integration-2'; // replace YOUR-SCENARIO-NAME with the name of your Scenario
const apiKey = '78e6b90b-4709-4c5d-80ad-bb75aa703b54'; // replace YOUR-API-KEY with your Make.com API key
const headers = {
  'Authorization': `Bearer ${apiKey}`,
  'Content-Type': 'application/json'
};

const form = document.querySelector('form');
const titleInput = document.querySelector('#title');
const toneInput = document.querySelector('#tone');
const relevantInfoInput = document.querySelector('#relevantinfo');
const audienceInput = document.querySelector('#audience');
const wordCountInput = document.querySelector('#word-count');
const referencesInput = document.querySelector('#references');
const submitBtn = document.querySelector('button[type="submit"]');

form.addEventListener('submit', async (event) => {
  event.preventDefault();

  const prompt = `${titleInput.value.trim()}|${toneInput.value.trim()}|${relevantInfoInput.value.trim()}|${audienceInput.value.trim()}|${wordCountInput.value.trim()}|${referencesInput.value.trim()}`;

  const requestOptions = {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${apiKey}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      prompt: prompt,
      /* any other relevant parameters */
    })
  };

  try {
    const response = await fetch(apiURL, requestOptions);
    const data = await response.json();
    console.log(data); // or display data in UI
  } catch (error) {
    console.error(error);
  }
});
 
 
 
 
    function toggleMenu() {
      var menu = document.getElementById("menu");
      if (menu.style.display === "block") {
        menu.style.display = "none";
      } else {
        menu.style.display = "block";
      }
    }

    const webhookUrl = 'https://hook.us1.make.com/jx6vayoife26xph29w2jjb6ipd72pmud';
    const form = document.querySelector('#form');
    const generatedText = document.querySelector('#generated-text');

    form.addEventListener('submit', async (event) => {
      event.preventDefault(); // prevent the form from submitting normally

      // Get the user's input from the form
      const title = document.querySelector('#title').value;
      const tone = document.querySelector('#tone').value;
      const relevantinfo = document.querySelector('#relevantinfo').value;
      const audience = document.querySelector('#audience').value;
      const wordCount = document.querySelector('#word-count').value;
      const references = document.querySelector('#references').value;

      // Call the Make.com webhook to generate a response
      const response = await fetch(webhookUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          title: title,
          tone: tone,
          relevantinfo: relevantinfo,
          audience: audience,
          wordCount: wordCount,
          references: references,
          max_tokens: 4000,
          n: 1,
          temperature: 0.9,
        }),
      });

      // Get the generated text from the response
      const generatedTextValue = await response.text();

      //
 // Set the value of the generated text box to the generated text
      generatedText.value = generatedTextValue;

      // Add the generated text to the form as a hidden field
      const inputField = document.createElement('input');
      inputField.type = 'hidden';
      inputField.name = 'output';
      inputField.value = generatedTextValue;
      form.appendChild(inputField);

      // Submit the form using an XMLHttpRequest object
      const xhr = new XMLHttpRequest();
      xhr.open('POST', form.action);
      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
      xhr.onreadystatechange = function() {
        if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
          // Redirect to the new page with the text result
          window.location.href = xhr.responseText;
        }
      };
      xhr.send(new FormData(form));

      // Clear the input field
      document.querySelector('#input').value = '';
    });
  </script>
  
  <script>
  
  function toggleMenu() {
  var menu = document.getElementById("menu");
  if (menu.style.display === "block") {
    menu.style.display = "none";
  } else {
    menu.style.display = "block";
  }
}

</script>
</body>
